## SSL 계층

SSL 계층은 인터넷에서 데이터를 안전하게 전송하기 위한 프로토콜이다. SSL은 TCP/IP 스택 위에 구현되며 전송 계층과 응용 계층 사이에 위치한다.

SSL은 데이터의 안전성을 보장하기 위해 데이터를 암호화 하고, 인증 및 기밀성의 기능을 제공한다. SSL 사용하면 통신 중에 제 3자가 데이터를 가로채도 데이터가 암호화 되어있기에 인식할 수 없다. 즉, 데이터의 안전성이 보장된다.

### SSL 통신 절차

SSL 계층은 SSL 핸드셰이크 프로토콜과 SSL 레코드 프로토콜로 구성된다.

- SSL 핸드셰이크 프로토콜 : 클라이언트와 서버 간의 SSL 연결을 설정하는 역할이다. 암호화 방식 및 인증서 정보를 교환한다.
- SSL 레코드 프로토콜 : 클라이언트와 서버 간에 실제 데이터를 전송하는 과정이다.

> SSL은 더 나은 기밀성을 제공하는 TLS로 대체되었지만, 아직 예전 웹사이트들은 SSL을 사용하기도 한다.

### SSL 인증 과정

1. 서버는 자신의 정보와 공개키를 CA로 전달한다.
2. CA는 자신의 개인키로 SSL 인증서를 암호화 후 서버에 발급해준다.
3. 서버는 암호화된 SSL 인증서를 웹 브라우저로 보낸다.
4. 웹브라우저는 CA의 개인키로 암호화된 SSL 인증서를 CA의 공개키로 복호화한다.
5. 웹브라우저는 서버의 공개키를 얻어낸다.
6. 웹브라우저는 데이터 암호화에 사용할 비밀키(대칭키)를 서버의 공개키로 암호화 후 서버로 보낸다.
7. 서버는 자신의 개인키로 복호화 후, 데이터 암호화에 사용할 비밀키(대칭키)를 얻어낸다.

### SSL Handshake

TCP 3-way Handshake 과정이 끝난 후, SSL Handshake 과정이 발생한다.

![스크린샷 2023-03-20 오후 7.30.16.png](..%2F..%2F..%2FDesktop%2F%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-03-20%20%EC%98%A4%ED%9B%84%207.30.16.png)

1. ClientHello : 클라이언트 측에서 처리 가능한 암호화 알고리즘을 전달해준다.
2. ServerHello : 서버 측에서 한가지 암호화 알고리즘을 선택한다.
3. Certificate : CA의 개인키로 암호화된 SSL 인증서를 브라우져에게 보낸다.
4. ClientKeyExchange : SSL 인증서를 CA의 공개키로 복호화 하고 서버의 공개키를 얻어냄. 이걸로 비밀키를 암호화 후 서버에게 전송.
5. Finished : 서버는 자신의 공개키로 암호화된 비밀키를 자신의 개인키로 복호화하고, 이제 서버와 클라이언트는 암호화에 사용될 대칭키를 둘 다 가지게 됨.

